(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(a){if(a.ep)return;a.ep=!0;const n=t(a);fetch(a.href,n)}})();class h{constructor(){this.longitude=null,this.latitude=null,this.placeName=null,this.placeId=null,this.weatherBaseUrl="https://api.open-meteo.com/v1/forecast?",this.placesBaseUrl="https://geocoding-api.open-meteo.com/v1/search?",this.specificPlaceUrl="https://geocoding-api.open-meteo.com/v1/"}setLongitudeAndLatitude(e,t){this.longitude=e,this.latitude=t}setPlaceData(e){this.placeName=e}setPlaceId(e){this.placeId=e}dataCheck(e,t){e||console.error(t)}async responseCheck(e){e.ok||console.error(`API failed with status ${e.status}`)}async fetchWeatherData(){this.dataCheck(this.longitude!==null&&this.latitude!==null,"Longitude or latitude is not available.");const e=`${this.weatherBaseUrl}latitude=${this.latitude}&longitude=${this.longitude}&daily=weather_code,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,sunrise,sunset&hourly=temperature_2m,relative_humidity_2m,precipitation,rain,weather_code,wind_speed_10m,visibility&current=temperature_2m,relative_humidity_2m,is_day,wind_speed_10m,apparent_temperature,precipitation,rain,showers,cloud_cover,weather_code&timezone=auto`,t=await fetch(e);return await this.responseCheck(t),await t.json()}async fetchPlacesData(){this.dataCheck(this.placeName,"Place name not available");const e=`${this.placesBaseUrl}name=${this.placeName}&count=10&language=en&format=json`,t=await fetch(e);return this.responseCheck(t),await t.json()}async fetchSpecificPlace(){this.dataCheck(this.placeId,"Place Id not available");const e=`${this.specificPlaceUrl}get?id=${this.placeId}`,t=await fetch(e);return this.responseCheck(t),await t.json()}resetStates(){this.placeId=null,this.longitude=null,this.latitude=null,this.placeName=null}}class d{constructor(){this.newData=new h,this.appState={allPlaces:[],selectedPlace:null,selectedPlaceId:null,error:null,isLoading:!1},this.weatherDetails={currentTemp:null,currentTime:null,currentDate:null,currentRain:null,currentPlace:null,currentCountry:null,fullCurrentDate:null,currentVisibility:null,currentWeatherType:null,currentHumidity:null,currentWind:null,currentDay:null,weatherCode:null,isDay:null,forecastTemps:[]}}async handleSearchInput(e){const t=e.value.trim();return await this.setSearchResults(t)}async setSearchResults(e){try{this.newData.setPlaceData(e);const r=await(await this.newData.fetchPlacesData()).results;return r||console.error("No array found"),this.appState.allPlaces.length=0,this.appState.allPlaces.push(r),r}catch(t){this.handleError(t);return}}setSelectedPlaceId(e){this.selectedPlaceId=e}setSelectedPlace(e){this.appState.selectedPlace=e}getSelectedPlace(){return this.appState.selectedPlace}async handlePlaceSelection(){try{this.newData.setPlaceId(this.selectedPlaceId);const e=await this.newData.fetchSpecificPlace();return this.appState.selectedPlace=e,this.appState.selectedPlaceId=e.id,this.weatherDetails.currentCountry=e.country,e.admin2?this.weatherDetails.currentPlace=e.admin2:this.weatherDetails.currentPlace=e.admin1,e}catch(e){this.handleError(e);return}}async handleWeatherRequest(e){try{const t=e.longitude,r=e.latitude;return this.newData.setLongitudeAndLatitude(t,r),await this.newData.fetchWeatherData()}catch(t){this.handleError(t);return}}async processWeatherData(e){this.setLoading(!0),this.resetWeatherData();const t=await this.handleWeatherRequest(e),r=t.current,a=t.daily,n=t.hourly.visibility[0]/1e3;return this.weatherDetails.currentVisibility=n.toFixed(1).toString()+"km",this.setCurrentWeather(r),this.setForecastWeather(a),this.setLoading(!1),t}resetWeatherData(){this.weatherDetails.currentTemp=null,this.weatherDetails.currentTime=null,this.weatherDetails.currentDate=null,this.weatherDetails.currentRain=null,this.weatherDetails.currentVisibility=null,this.weatherDetails.currentHumidity=null,this.weatherDetails.currentWind=null,this.weatherDetails.currentDay=null,this.weatherDetails.weatherCode=null}setForecastWeather(e){this.weatherDetails.forecastTemps.length=0;for(let t=0;t<e.temperature_2m_max.length;t++){const r={temperature:e.temperature_2m_max[t],feelsLike:e.apparent_temperature_max[t],weatherCode:e.weather_code[t],date:e.time[t],weatherType:this.resolveWeatherType(e.weather_code[t]),day:this.getDayName(e.time[t])};this.weatherDetails.forecastTemps.push(r)}}setCurrentWeather(e){this.weatherDetails.currentTemp=e.temperature_2m,this.weatherDetails.currentDate=e.time.slice(0,10),this.weatherDetails.currentTime=e.time.slice(11),this.weatherDetails.currentHumidity=e.relative_humidity_2m,this.weatherDetails.currentRain=e.rain,this.weatherDetails.currentWind=e.wind_speed_10m,this.weatherDetails.weatherCode=e.weather_code,this.weatherDetails.fullCurrentDate=e.time,this.weatherDetails.currentDay=this.getDayName(e.time.slice(0,10)),this.weatherDetails.isDay=e.is_day,this.weatherDetails.currentWeatherType=this.resolveWeatherType(this.weatherDetails.weatherCode)}getWeatherDetails(){return this.weatherDetails}getDayName(e){return new Date(e).toLocaleDateString("en-US",{weekday:"long"})}handleError(e){alert(`App ${e}`),this.setLoading(!1),this.appState.error=e.message}setLoading(e){this.appState.isLoading=e}resolveWeatherType(e){switch(e){case 0:return"Clear";case 1:return"Mainly Clear";case 2:return"Partly Cloudy";case 3:return"Cloudy";case 45:return"Foggy";case 48:return"Freezing Fog";case 51:return"Light Drizzle";case 53:return"Drizzle";case 55:return"Heavy Drizzle";case 56:return"Icy Drizzle";case 57:return"Heavy Icy Drizzle";case 61:return"Light Rain";case 63:return"Rainy";case 65:return"Heavy Rain";case 66:return"Icy Rain";case 67:return"Heavy Icy Rain";case 71:return"Light Snow";case 73:return"Snowy";case 75:return"Heavy Snow";case 77:return"Snow Flurries";case 80:return"Light Showers";case 81:return"Rainy Showers";case 82:return"Heavy Showers";case 85:return"Light Snow Showers";case 86:return"Heavy Snow Showers";case 95:return"Thunderstorm";case 96:return"Thunderstorm(hail)";case 99:return"Heavy Thunderstorm"}}}class u{constructor(){this.searchElements=this.initSearchElements(),this.weatherCardElements=this.initWeatherCardElements(),this.forecastElements=this.initForecastElements(),this.newController=new d}initSearchElements(){return{inputElement:document.querySelector("#search"),searchBtn:document.querySelector(".search-btn"),crossBtn:document.querySelector(".cross-btn"),searchContainer:document.querySelector(".search-container"),suggestionsContainer:document.querySelector(".search-suggestions-container"),backgroundOverlay:document.querySelector(".background-overlay")}}initWeatherCardElements(){const e=document.querySelector(".weather-card"),t=e.querySelector("header"),r=e.querySelector(".weather-description"),a=document.querySelector("main"),n=t.querySelector(".rain"),s=t.querySelector(".visibility"),i=e.querySelector(".wind"),l=e.querySelector(".humidity");return{weatherCard:e,header:t,mainElement:a,headerElementChildren:{imageElement:t.querySelector("img"),timeElement:t.querySelector("time"),dayElement:t.querySelector(".day"),timeSpanElement:t.querySelector("span.time"),tempElement:t.querySelector(".temp"),temperatureSpanElement:t.querySelector(".temperature"),tempLabelSpanElement:t.querySelector(".label"),addressElement:t.querySelector("address"),counrtySpan:t.querySelector(".country"),citySpan:t.querySelector(".city"),rainElement:n,visibilityElement:s,cardSearchBtn:t.querySelector("button"),rainChildren:{dtElement:n.querySelector("dt"),ddElement:n.querySelector("dd")},visibilityChildren:{dtElement:s.querySelector("dt"),ddElement:s.querySelector("dd")}},weatherArticleElement:r,descriptionPara:r.querySelector("p"),windElement:i,humidityElement:l,windChildren:{dtElement:i.querySelector("dt"),ddElement:i.querySelector("dd")},humidityChildren:{dtElement:l.querySelector("dt"),ddElement:l.querySelector("dd")},loadingSpinner:document.querySelector(".spinner")}}initForecastElements(){const e=document.querySelector(".forecast-pills-container"),t=e.querySelector("ul");return{forecastParent:e,forecastUl:t,forecastChildren:{liElements:t.querySelectorAll("li"),forecastArticle:t.querySelectorAll("article"),forecastDay:document.querySelectorAll(".forcast-day"),forecastTemperature:t.querySelectorAll(".forecast-temprature"),forecastApparentTemperature:t.querySelectorAll(".forecast-apparent-temp"),forecastIcons:t.querySelectorAll("img")}}}async renderSearchSuggestions(e,t){const r=await this.newController.handleSearchInput(e);t.innerHTML="",r.forEach(a=>{const n=document.createElement("button");n.textContent=`${a.name}, ${a.admin1}, ${a.country}`,n.style.visibility="inherit",n.setAttribute("data-id",a.id),t.appendChild(n)})}init(){const e=this.searchElements.inputElement,t=this.searchElements.suggestionsContainer,r=this.searchElements.searchBtn,a=this.searchElements.crossBtn,n=this.weatherCardElements.headerElementChildren.cardSearchBtn,s=this.searchElements.backgroundOverlay;e.addEventListener("input",()=>this.renderSearchSuggestions(e,t)),t.addEventListener("click",i=>this.managePlaceSelection(e,i)),r.addEventListener("click",()=>{if(e.value.trim()!==""){if(this.newController.appState.selectedPlaceId===null){alert("Please select a place from given suggestions.");return}this.manageWeatherSelection(),this.hideSearchContainer()}}),n.addEventListener("click",()=>{e.value="",t.innerHTML="",this.renderSearchContainer()}),s.addEventListener("click",()=>this.hideSearchContainer()),a.addEventListener("click",()=>this.manageCrossBtn(e,t))}async managePlaceSelection(e,t){const r=t.target.closest("button");if(!r)return;r.setAttribute("data-selected",""),e.value=r.textContent,this.newController.setSelectedPlaceId(r.dataset.id);const a=await this.newController.handlePlaceSelection();this.newController.setSelectedPlace(a)}manageCrossBtn(e,t){e.value="",t.innerHTML=""}renderSearchContainer(){this.showSearchContainer(),this.weatherCardElements.weatherCard.classList.add("blur"),this.searchElements.backgroundOverlay.classList.add("show")}showSearchContainer(){this.searchElements.searchContainer.classList.remove("hide")}hideSearchContainer(){this.weatherCardElements.weatherCard.classList.remove("blur"),this.searchElements.backgroundOverlay.classList.remove("show"),this.searchElements.searchContainer.classList.toggle("hide")}async manageWeatherSelection(){this.showLoader();const e=this.newController.getSelectedPlace();await this.newController.processWeatherData(e);const t=this.newController.getWeatherDetails();this.renderWeatherDetails(t),this.hideLoader()}async renderWeatherDetails(e){this.weatherCardElements.headerElementChildren.timeElement.dateTime=e.fullCurrentDate,this.weatherCardElements.headerElementChildren.dayElement.textContent=e.currentDay,this.weatherCardElements.headerElementChildren.timeSpanElement.textContent=e.currentTime,this.weatherCardElements.headerElementChildren.temperatureSpanElement.textContent=`${e.currentTemp}Â°C`,this.weatherCardElements.headerElementChildren.tempLabelSpanElement.textContent=`${e.currentWeatherType}, `,this.weatherCardElements.headerElementChildren.rainChildren.ddElement.textContent=`${e.currentRain}%`,this.weatherCardElements.headerElementChildren.visibilityChildren.ddElement.textContent=`${e.currentVisibility}`,this.weatherCardElements.headerElementChildren.citySpan.textContent=`${e.currentPlace}, `,this.weatherCardElements.headerElementChildren.counrtySpan.textContent=`${e.currentCountry}`,this.weatherCardElements.humidityChildren.ddElement.textContent=`${e.currentHumidity}%`,this.weatherCardElements.windChildren.ddElement.textContent=`${e.currentWind}km/h`,this.renderForeCastWeather(e),this.renderCurrentIcons(e),this.renderBackgrounds(e.currentWeatherType,e.isDay),this.showWeatherType(),this.setArticleElementText(e.currentWeatherType),this.decreaseElementLength(this.weatherCardElements.headerElementChildren.tempLabelSpanElement.textContent.length,this.weatherCardElements.weatherArticleElement)}renderCurrentIcons(e){const t=this.weatherCardElements.headerElementChildren.imageElement,r=this.getWeatherIcons(e.currentWeatherType,"current");t.src=`${r}`}renderForeCastWeather(e){const{forecastDay:t,forecastTemperature:r,forecastIcons:a,forecastApparentTemperature:n}=this.forecastElements.forecastChildren;e.forecastTemps.forEach((s,i)=>{const l=this.getWeatherIcons(s.weatherType,"forecast"),c=s.day.slice(0,3).toUpperCase();t[0].textContent="Today",t[i].textContent=`${c}`,r[i].textContent=`${s.temperature}`,n[i].textContent=`${s.feelsLike}`,a[i].src=`${l}`,a[i].setAttribute("data-weather-type",s.weatherType)})}showWeatherType(){this.forecastElements.forecastChildren.forecastArticle.forEach(e=>{const t=e.querySelector(".icon"),r=e.querySelector("span");r.textContent="",r.textContent=t.dataset.weatherType,e.appendChild(r),t.addEventListener("mouseenter",()=>{r.classList.add("show")}),t.addEventListener("mouseleave",()=>{r.classList.remove("show")})})}showLoader(){this.weatherCardElements.weatherCard.classList.add("hide"),this.weatherCardElements.loadingSpinner.classList.add("show")}hideLoader(){this.weatherCardElements.weatherCard.classList.remove("hide"),this.weatherCardElements.loadingSpinner.classList.remove("show")}getWeatherIcons(e,t="current"){const r=t==="forecast"?"/weather-me//image-assets/icons/svg/":"/weather-me//image-assets/icons/";switch(e){case"Clear":case"Mainly Clear":return`${r}sunny-icon.${t==="forecast"?"svg":"png"}`;case"Partly Cloudy":return`${r}partially-cloudy.${t==="forecast"?"svg":"png"}`;case"Cloudy":return`${r}cloudy.${t==="forecast"?"svg":"png"}`;case"Light Drizzle":case"Drizzle":return`${r}drizzle.${t==="forecast"?"svg":"png"}`;case"Foggy":case"Freezing Fog":return`${r}mist-fog.${t==="forecast"?"svg":"png"}`;case"Heavy Drizzle":return`${r}rain.${t==="forecast"?"svg":"png"}`;case"Icy Drizzle":case"Heavy Icy Drizzle":return`${r}light-snow.${t==="forecast"?"svg":"png"}`;case"Light Rain":case"Rainy":return`${r}rain.${t==="forecast"?"svg":"png"}`;case"Heavy Rain":return`${r}stormy.${t==="forecast"?"svg":"png"}`;case"Light Snow":case"Snowy":return`${r}light-snow.${t==="forecast"?"svg":"png"}`;case"Heavy Snow":case"Snow Flurries":case"Icy Rain":case"Heavy Icy Rain":return`${r}heavy-snow.${t==="forecast"?"svg":"png"}`;case"Light Showers":case"Rainy Showers":return`${r}rain.${t==="forecast"?"svg":"png"}`;case"Heavy Showers":return`${r}heavy-rain.${t==="forecast"?"svg":"png"}`;case"Light Snow Showers":return`${r}light-snow.${t==="forecast"?"svg":"png"}`;case"Heavy Snow Showers":return`${r}heavy-snow.${t==="forecast"?"svg":"png"}`;case"Thunderstorm":case"Thunderstorm(hail)":return`${r}stormy.${t==="forecast"?"svg":"png"}`;case"Heavy Thunderstorm":return`${r}stormy.${t==="forecast"?"svg":"png"}`}}getWeatherBackgrounds(){return{rainyDay:[{textColor:"#ffffff",solidBg:"#0F4A00",bgImage:"/weather-me//background-images/morn-rainy-1.png"}],rainyNight:[{textColor:"#ffffff",solidBg:"#081433",bgImage:"/weather-me//background-images/night-rainy.png"},{textColor:"#ffffff",solidBg:"#0C1726",bgImage:"/weather-me//background-images/nighty-nighty-rainy.png"}],clearNights:[{textColor:"#ffffff",solidBg:"#0C1959",bgImage:"/weather-me//background-images/night.png"},{textColor:"#ffffff",solidBg:"#10324F",bgImage:"/weather-me//background-images/night-2.png"}],snowyNight:[{textColor:"#fff",solidBg:"#10324F",bgImage:"/background-images/night-winter.png"}],clearDay:[{textColor:"#2a1a00",solidBg:"#BD6E00",bgImage:"/weather-me//background-images/sunny-evening.png"},{textColor:"#2a1a00",solidBg:"#036696",bgImage:"/weather-me//background-images/sunny-kids-at-park.png"}],snowyDay:[{textColor:"#2a1a00",solidBg:"#5F839E",bgImage:"/weather-me//background-images/winter-sunny.png"},{textColor:"#2a1a00",solidBg:"#5F839E",bgImage:"/weather-me//background-images/snowy.png"}],cloudyDay:[{textColor:"#2a1a00",solidBg:"#5F839E",bgImage:"/weather-me//background-images/cloudy.png"}],cloudyNight:[{textColor:"#fff",solidBg:"#202F4F",bgImage:"/weather-me//background-images/cloudy-night.png"}]}}setArticleElementText(e){const t=this.getWeatherText(e),r=this.weatherCardElements.weatherArticleElement.querySelector("p");r.textContent=`${t}`}getWeatherText(e){switch(e){case"Clear":return"Clear skies with plenty of sunshine.";case"Mainly Clear":return"Mostly clear with pleasant conditions.";case"Partly Cloudy":return"A mix of sunshine and passing clouds.";case"Cloudy":return"Cloudy skies throughout the day.";case"Foggy":return"Foggy conditions with reduced visibility.";case"Freezing Fog":return"Cold and foggy with icy conditions.";case"Light Drizzle":return"Light drizzle drifting through the day.";case"Drizzle":return"Periods of drizzle expected.";case"Heavy Drizzle":return"Persistent drizzle with damp conditions.";case"Light Rain":return"Light rain showers at times.";case"Rainy":return"Rainy weather for most of the day.";case"Heavy Rain":return"Heavy rain with wet conditions.";case"Light Snow":return"Light snowfall expected.";case"Snowy":return"Snowy conditions throughout the day.";case"Heavy Snow":return"Heavy snowfall with cold temperatures.";case"Snow Flurries":return"Occasional snow flurries.";case"Icy Rain":return"Icy rain creating slippery conditions.";case"Heavy Icy Rain":return"Severe icy rain expected.";case"Light Showers":return"Scattered rain showers.";case"Rainy Showers":return"Intermittent rain showers through the day.";case"Heavy Showers":return"Intense rain showers at times.";case"Light Snow Showers":return"Light snow showers possible.";case"Heavy Snow Showers":return"Heavy snow showers expected.";case"Thunderstorm":return"Thunderstorms likely later in the day.";case"Thunderstorm(hail)":return"Stormy conditions with possible hail.";case"Heavy Thunderstorm":return"Severe thunderstorms expected.";default:return"Weather conditions may vary throughout the day."}}applyTheme(e,t){const r=t===1?"day":"night",a=this.getWeatherBackgrounds();let n=null;return e==="Rain"?n=r==="day"?"rainyDay":"rainyNight":e==="Snow"?n=r==="day"?"snowyDay":"snowyNight":e==="Clear"?n=r==="day"?"clearDay":"clearNight":e==="Cloudy"&&(n=r==="day"?"cloudyDay":"cloudyNight"),this.pickRandomArray(a[n])}getWeatherCategory(e){const t=["Rainy","Light Rain","Heavy Rain","Icy Rain","Heavy Icy Rain","Light Showers","Rainy Showers","Heavy Showers","Thunderstorm","Thunderstorm(hail)","Heavy Thunderstorm"],r=["Light Snow Showers","Heavy Snow Showers","Light Snow","Snowy","Heavy Snow","Snow Flurries"],a=["Clear","Mainly Clear"],n=["Partly Cloudy","Cloudy","Foggy","Freezing Fog"];if(t.includes(e))return"Rain";if(r.includes(e))return"Snow";if(a.includes(e))return"Clear";if(n.includes(e))return"Cloudy"}renderBackgrounds(e,t){const r=this.getWeatherCategory(e),a=this.weatherCardElements.mainElement,n=this.applyTheme(r,t),s=document.documentElement;s.style.setProperty("--bgImage",`url(${n.bgImage})`),s.style.setProperty("--color",n.textColor),s.style.setProperty("--metric-bg",n.solidBg),s.style.setProperty("--article-bg",n.solidBg),a.style.backgroundRepeat="no-repeat",a.style.backgroundPosition="center",a.style.backgroundSize="cover"}pickRandomArray(e){return e[Math.floor(Math.random()*e.length)]}decreaseElementLength(e,t){e>=19&&(t.style.fontSize="1.9rem")}}function m(){new u().init()}m();
